<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M.S.L. Portal</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM (React 18) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel (JSX変換用) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Quantico:ital,wght@0,400;0,700;1,400&family=IBM+Plex+Sans+JP:wght@400;500;700&family=JetBrains+Mono&family=Shippori+Mincho&display=swap"
        rel="stylesheet">

    <!-- カスタムスタイル -->
    <style>
        body {
            background-color: #0f172a;
            /* Slate-900 */
            color: white;
            margin: 0;
            font-family: 'IBM Plex Sans JP', sans-serif;
            overflow-x: hidden;
            overflow-y: auto;
        }

        .font-logo {
            font-family: 'Black Ops One', system-ui;
        }

        .font-tech {
            font-family: 'Quantico', sans-serif;
        }

        .font-world {
            font-family: 'Shippori Mincho', serif;
        }

        .font-dev {
            font-family: 'JetBrains Mono', monospace;
        }

        @keyframes pulse-bg {

            0%,
            100% {
                opacity: 0.2;
            }

            50% {
                opacity: 0.3;
            }
        }

        .animate-bg {
            animation: pulse-bg 8s ease-in-out infinite;
        }

        /* アニメーション定義 */
        @keyframes logoSequence {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(1.1);
            }

            20% {
                opacity: 1;
                transform: translateY(15vh) scale(1.1);
            }

            65% {
                transform: translateY(15vh) scale(1.1);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .anim-logo-wrapper {
            animation: logoSequence 2.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes contentFadeIn {
            from {
                opacity: 0;
                transform: translateY(15px);
                pointer-events: none;
            }

            to {
                opacity: 1;
                transform: translateY(0);
                pointer-events: auto;
            }
        }

        .anim-content-wrapper {
            opacity: 0;
            pointer-events: none;
            animation: contentFadeIn 0.8s ease-out 2.2s forwards;
        }

        .anim-footer {
            opacity: 0;
            animation: contentFadeIn 0.8s ease-out 2.8s forwards;
        }

        .skip-animation {
            opacity: 1 !important;
            transform: translateY(0) !important;
            animation: none !important;
            pointer-events: auto !important;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [isVisited, setIsVisited] = useState(false);

            useEffect(() => {
                const visited = sessionStorage.getItem('msl_portal_visited');
                if (visited) setIsVisited(true);
                else sessionStorage.setItem('msl_portal_visited', 'true');
            }, []);

            const handleNavigate = (target) => {
                if (target === 'world') window.location.href = './public/index.html';
                else if (target === 'dev') window.location.href = './dev/index.html';
                else if (target === 'studio') window.location.href = './studio/index.html';
                else console.log(`Navigating to: ${target}`);
            };

            const logoClass = isVisited ? 'skip-animation' : 'anim-logo-wrapper';
            const contentClass = isVisited ? 'skip-animation' : 'anim-content-wrapper';
            const footerClass = isVisited ? 'skip-animation' : 'anim-footer';

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4 relative">

                    <div className="absolute inset-0 pointer-events-none animate-bg"
                        style={{ backgroundImage: 'radial-gradient(circle at 50% 50%, #1e293b 0%, #0f172a 100%)' }}>
                    </div>

                    {/* Logo Section */}
                    <div className={`text-center mb-8 md:mb-12 z-10 ${logoClass} w-full`}>
                        <h1 className="text-4xl sm:text-6xl md:text-8xl font-logo mb-2 text-white opacity-90 tracking-[0.1rem]"
                            style={{ textShadow: '0 0 30px rgba(59, 130, 246, 0.3)' }}>
                            M.S.L.
                        </h1>
                        <div className="flex flex-col items-center gap-1">
                            <div className="h-px w-16 md:w-32 bg-blue-500/50 mb-2"></div>
                            <p className="text-blue-400 text-xs sm:text-sm md:text-base font-tech tracking-[0.3em] uppercase font-bold">
                                Manon Structural Logic
                            </p>
                            <p className="text-gray-500 text-[10px] font-tech tracking-widest">
                                SYSTEM VER. 1.0.0 // READY
                            </p>
                        </div>
                    </div>

                    {/* Navigation Section */}
                    <div className={`flex flex-col gap-6 w-full max-w-md md:max-w-4xl z-10 ${contentClass}`}>

                        {/* Main Action: Launch Studio */}
                        <button
                            onClick={() => handleNavigate('studio')}
                            className="
                                w-full border-2 border-green-500/50 bg-green-900/20
                                p-6 md:p-8 rounded-xl text-center
                                hover:bg-green-900/40 hover:border-green-400 hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(34,197,94,0.2)]
                                active:scale-[0.98] transition-all duration-300 group backdrop-blur-md
                            "
                        >
                            <div className="text-green-400 font-tech text-sm md:text-base mb-2 tracking-[0.2em] group-hover:text-green-300">
                                <i className="fas fa-rocket mr-2"></i>EXECUTION ENVIRONMENT
                            </div>
                            <h2 className="text-2xl md:text-4xl font-bold text-white font-logo tracking-wider group-hover:text-green-100">
                                LAUNCH M-STUDIO
                            </h2>
                            <p className="text-gray-400 text-xs md:text-sm mt-2 font-mono group-hover:text-gray-300">
                                3D魔法開発・実行シミュレーターを起動
                            </p>
                        </button>

                        {/* Sub Actions: Archives */}
                        <div className="flex flex-col md:flex-row gap-4 md:gap-6">
                            <button
                                onClick={() => handleNavigate('world')}
                                className="flex-1 border border-yellow-600/30 bg-yellow-900/10 p-6 rounded-lg text-left hover:bg-yellow-900/20 hover:border-yellow-600/80 active:bg-yellow-900/40 transition-all duration-300 group backdrop-blur-sm"
                            >
                                <div className="text-yellow-600 font-tech text-[10px] md:text-xs mb-2 tracking-widest group-hover:text-yellow-400">LAYER: WORLD</div>
                                <h2 className="text-xl font-bold mb-2 text-yellow-100 group-hover:text-white">一般公開アーカイブ</h2>
                                <p className="text-gray-400 text-xs font-medium leading-relaxed group-hover:text-yellow-200/80">魔法史、魔素物理学、社会情勢に関する資料。</p>
                            </button>

                            <button
                                onClick={() => handleNavigate('dev')}
                                className="flex-1 border border-blue-600/30 bg-blue-900/10 p-6 rounded-lg text-left hover:bg-blue-900/20 hover:border-blue-500/80 active:bg-blue-900/40 transition-all duration-300 group backdrop-blur-sm"
                            >
                                <div className="text-blue-600 font-tech text-[10px] md:text-xs mb-2 tracking-widest group-hover:text-blue-400">LAYER: DEV</div>
                                <h2 className="text-xl font-bold font-dev mb-2 text-blue-100 group-hover:text-white">有資格者エリア</h2>
                                <p className="text-gray-400 text-xs font-medium leading-relaxed group-hover:text-blue-200/80">M.S.L.仕様書、APIリファレンス、安全規定。</p>
                            </button>
                        </div>

                    </div>

                    <footer className={`absolute bottom-4 text-gray-600 text-[10px] font-tech tracking-wider flex flex-col md:flex-row items-center gap-2 md:gap-4 z-10 ${footerClass} w-full justify-center`}>
                        <span>© 2025 Magic Development Bureau</span>
                        <span className="hidden md:inline text-gray-700">::</span>
                        <span>SECURE CONNECTION ESTABLISHED</span>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>